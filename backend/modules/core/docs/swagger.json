{
    "swagger": "2.0",
    "info": {
        "description": "API สำหรับโมดูล core",
        "title": "Core API",
        "contact": {},
        "version": "1.0"
    },
    "basePath": "/api/v1/core",
    "paths": {
        "/admin/change_role": {
            "put": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "สำหรับ Super Admin เพื่อเปลี่ยน Role ของผู้ใช้",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Admin"
                ],
                "summary": "เปลี่ยน Role ของผู้ใช้",
                "parameters": [
                    {
                        "description": "ข้อมูลผู้ใช้งาน",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/corePort.ChangeRoleInput"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/admin/create_users": {
            "post": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "ใช้สำหรับ SUPER_ADMIN สร้าง User role อื่น ๆ แต่ไม่สามารถใช้สร้าง SUPER_ADMIN ได้",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "User"
                ],
                "summary": "สร้างผู้ใช้โดย Super Admin",
                "parameters": [
                    {
                        "description": "ข้อมูลผู้ใช้งาน",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/corePort.CreateUserInput"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/coreModels.User"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/admin/user-by-role": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "ใช้สำหรับ Super Admin เพื่อดึง Users เฉพาะ role ที่ระบุ เช่น STAFF, USER, BRANCH_ADMIN",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Admin"
                ],
                "summary": "ดึงข้อมูลผู้ใช้งานโดยเลือกเฉพาะ role ที่ต้องการ",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Role ที่ต้องการกรอง เช่น STAFF, USER, BRANCH_ADMIN, SUPER_ADMIN",
                        "name": "role",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/corePort.UserInfoResponse"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/admin/users": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "สำหรับ Super Admin ดึง Users ทั้งหมด พร้อม Pagination",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Admin"
                ],
                "summary": "ดึงข้อมูลผู้ใช้งานทั้งหมด",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "หน้าที่ต้องการ (default 1)",
                        "name": "page",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "description": "จำนวนรายการต่อหน้า (default 10)",
                        "name": "limit",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/corePort.UserInfoResponse"
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/auth/register": {
            "post": {
                "description": "ลงทะเบียนเพื่อ สร้าง Account โดย User เป็นคนสร้างเอง",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Auth"
                ],
                "summary": "สร้าง Account Role USER",
                "parameters": [
                    {
                        "description": "ข้อมูลผู้ใช้",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/corePort.RegisterInput"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "ลงทะเบียนสำเร็จ",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "400": {
                        "description": "ข้อมูลไม่ถูกต้องหรือลงทะเบียนล้มเหลว",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/core/branch/:id": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "ดึงข้อมูลสาขาเดียวตามรหัสสาขาที่ระบุ (ต้องมีสิทธิ์ RolesCanManageBranch)",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Branch"
                ],
                "summary": "ดึงข้อมูลสาขาตาม ID",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "รหัสสาขา",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "คืนค่า status และข้อมูลสาขาใน key `data`",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "Invalid branch ID หรือ รหัสไม่ถูกต้อง",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "403": {
                        "description": "ไม่มีสิทธิ์เข้าถึง",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "404": {
                        "description": "ไม่พบสาขาตามรหัสที่ระบุ",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "เกิดข้อผิดพลาดระหว่างดึงข้อมูลสาขา",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/core/branches/all": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "ดึงข้อมูลสาขาทั้งหมดโดยไม่กรองตาม Tenant (ต้องมีสิทธิ์ RolesCanManageBranch)",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Branch"
                ],
                "summary": "ดึงรายการสาขาทั้งหมด",
                "responses": {
                    "200": {
                        "description": "คืนค่า status และ array ของสาขาใน key `data`",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "403": {
                        "description": "ไม่มีสิทธิ์เข้าถึง",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "เกิดข้อผิดพลาดระหว่างดึงข้อมูลสาขา",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/core/tenant-route": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "ดึงรายการ Tenant โดยสามารถกรองเฉพาะที่ active ได้ผ่าน query parameter `active` (default = true)",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Tenant"
                ],
                "summary": "ดึงรายการ Tenant ทั้งหมด",
                "parameters": [
                    {
                        "type": "boolean",
                        "description": "กรองเฉพาะ Tenant ที่ active (true/false), default = true",
                        "name": "active",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "คืนค่า status และ array ของ Tenant ใน key `data`",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "Invalid `active` query parameter",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "เกิดข้อผิดพลาดระหว่างดึงรายการ Tenant",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/core/tenant-route/:id": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "ดึงรายละเอียดของ Tenant หนึ่งรายการตามรหัสที่ระบุ",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Tenant"
                ],
                "summary": "ดึงข้อมูล Tenant ตาม ID",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "รหัส Tenant",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "คืนค่า status และข้อมูล Tenant ใน key `data`",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "Invalid tenant ID หรือ รหัสไม่ถูกต้อง",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "404": {
                        "description": "ไม่พบ Tenant ตามรหัสที่ระบุ",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "เกิดข้อผิดพลาดระหว่างดึงข้อมูล Tenant",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            },
            "put": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "อัปเดตชื่อ โดเมน หรือสถานะ active ของ Tenant หน่วยตามรหัสที่ระบุ",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Tenant"
                ],
                "summary": "แก้ไขข้อมูล Tenant ตาม ID",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "รหัส Tenant",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "ข้อมูลที่ต้องการอัปเดต (name, domain, isActive)",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/corePort.UpdateTenantInput"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "คืนค่า status และข้อความยืนยันการอัปเดต",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid tenant ID หรือ malformed JSON หรือ validation error",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "404": {
                        "description": "ไม่พบ Tenant ตามรหัสที่ระบุ",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "เกิดข้อผิดพลาดระหว่างอัปเดต Tenant",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            },
            "delete": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "ลบ Tenant ที่ระบุด้วยรหัส (ต้องไม่มีการใช้งานอยู่ หรือจะเกิด conflict error หากยังมีทรัพยากรภายในใช้ Tenant นี้อยู่)",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Tenant"
                ],
                "summary": "ลบ Tenant ตาม ID",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "รหัส Tenant",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "คืนค่า status และข้อความยืนยันการลบ",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid tenant ID หรือ รหัสไม่ถูกต้อง",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "404": {
                        "description": "ไม่พบ Tenant ตามรหัสที่ระบุ",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "409": {
                        "description": "ไม่สามารถลบ Tenant ได้ เนื่องจากยังมีการใช้งานภายในระบบ",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "เกิดข้อผิดพลาดระหว่างการลบ Tenant",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/core/tenant-route/create": {
            "post": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "สร้าง Tenant ใหม่โดยระบุชื่อ (name) และโดเมน (domain)",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Tenant"
                ],
                "summary": "สร้าง Tenant ใหม่",
                "parameters": [
                    {
                        "description": "ข้อมูลสำหรับสร้าง Tenant (name, domain)",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/corePort.CreateTenantInput"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "คืนค่า status และข้อมูล tenant ที่สร้าง",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "Malformed JSON หรือข้อมูลไม่ถูกต้อง",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "เกิดข้อผิดพลาดระหว่างสร้าง tenant",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/core/tenant-user/tenants/:tenant_id/users/:user_id": {
            "post": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "กำหนดให้ User ที่ระบุด้วย `user_id` เข้าใช้งาน Tenant ที่ระบุด้วย `tenant_id`",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "TenantUser"
                ],
                "summary": "เพิ่มผู้ใช้งานให้กับ Tenant",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "รหัส Tenant",
                        "name": "tenant_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "description": "รหัส User",
                        "name": "user_id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "201": {
                        "description": "คืนค่า status และข้อความยืนยันการเพิ่มผู้ใช้",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid tenant ID หรือ invalid user ID",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "404": {
                        "description": "Tenant not found หรือ User not found",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "409": {
                        "description": "User already assigned to this tenant",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "เกิดข้อผิดพลาดระหว่างการเพิ่มผู้ใช้งานให้ Tenant",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            },
            "delete": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "ลบการผูก User ที่ระบุด้วย `user_id` ออกจาก Tenant ที่ระบุด้วย `tenant_id`",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "TenantUser"
                ],
                "summary": "นำผู้ใช้ออกจาก Tenant",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "รหัส Tenant",
                        "name": "tenant_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "description": "รหัส User",
                        "name": "user_id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "คืนค่า status และข้อความยืนยันการลบผู้ใช้",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid tenant ID หรือ Invalid user ID",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "404": {
                        "description": "Tenant not found หรือ User not found",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "409": {
                        "description": "User is not assigned to this tenant",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "เกิดข้อผิดพลาดระหว่างการลบผู้ใช้จาก Tenant",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/core/tenant-user/user/:user_id": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "ดึงรายการ Tenant ที่ User ระบุเข้าใช้งานได้ (user_id มาจาก path)",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "TenantUser"
                ],
                "summary": "ดึงรายการ Tenant ของ User",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "รหัส User",
                        "name": "user_id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "คืนค่า status และ array ของ Tenant ใน key `data`",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "Invalid user ID",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "404": {
                        "description": "User not found",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "เกิดข้อผิดพลาดระหว่างดึงรายการ Tenant",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/core/tenants/:tenant_id/branches": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "ดึงข้อมูลสาขาทั้งหมดเฉพาะสำหรับ Tenant ที่ผู้ใช้ล็อกอินอยู่ (tenant_id มาจาก context หลังตรวจสอบ token)",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Branch"
                ],
                "summary": "ดึงรายการสาขาของ Tenant ปัจจุบัน",
                "responses": {
                    "200": {
                        "description": "คืนค่า status และ array ของสาขาใน key `data`",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "Missing or invalid tenant ID หรือ InvalidTenantID",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "403": {
                        "description": "ไม่มีสิทธิ์เข้าถึง",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "404": {
                        "description": "ไม่พบ Tenant ตามรหัสที่ระบุ",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "เกิดข้อผิดพลาดระหว่างดึงข้อมูลสาขา",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            },
            "post": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "ใช้สร้างสาขาย่อยใหม่โดยระบุชื่อสาขาและที่อยู่เท่านั้น ยังไม่มีการเชื่อมโยงกับ Tenant",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Branch"
                ],
                "summary": "สร้างสาขาใหม่ เช็คตัวเชื่อมกับ Tenant",
                "parameters": [
                    {
                        "description": "ข้อมูลสำหรับสร้างสาขา (ชื่อ, ที่อยู่) — tenant_id จะถูกดึงจาก context ของผู้ใช้",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/corePort.CreateBranchInput"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "คืนค่า status, message และข้อมูลสาขาที่สร้าง",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "ข้อมูลส่งมาไม่ถูกต้อง, ขาด tenant ID หรือสาขานี้มีอยู่แล้ว",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "403": {
                        "description": "ไม่มีสิทธิ์เข้าถึง",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "สร้างสาขาไม่สำเร็จ",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/core/tenants/:tenant_id/branches/:id": {
            "put": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "อัปเดตชื่อสาขาที่ระบุด้วยรหัสสาขา (ต้องมีสิทธิ์ RolesCanManageBranch)",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Branch"
                ],
                "summary": "แก้ไขชื่อสาขาตาม ID",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "รหัสสาขา",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "ข้อมูลที่ต้องการอัปเดต (name)",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/corePort.UpdateBranchInput"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "คืนค่า status และข้อมูลสาขาที่อัปเดต",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "Invalid branch ID, malformed JSON, หรือ validation error",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "403": {
                        "description": "ไม่มีสิทธิ์เข้าถึง",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "404": {
                        "description": "ไม่พบสาขาตามรหัสที่ระบุ",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "เกิดข้อผิดพลาดระหว่างอัปเดตสาขา",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            },
            "delete": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "ลบสาขาที่ระบุด้วยรหัสสาขา (ต้องมีสิทธิ์ RolesCanManageBranch)",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Branch"
                ],
                "summary": "ลบสาขาตาม ID",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "รหัสสาขา",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "คืนค่า status และข้อความยืนยันการลบ",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "400": {
                        "description": "Invalid branch ID หรือ รหัสไม่ถูกต้อง",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "403": {
                        "description": "ไม่มีสิทธิ์เข้าถึง",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "404": {
                        "description": "ไม่พบสาขาตามรหัสที่ระบุ",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "409": {
                        "description": "ไม่สามารถลบสาขาได้ เนื่องจากมีการใช้งานอยู่",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "เกิดข้อผิดพลาดระหว่างการลบสาขา",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/login": {
            "post": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "Authenticates a user with email \u0026 password, issues a JWT cookie, and logs the attempt.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Auth"
                ],
                "summary": "User login",
                "parameters": [
                    {
                        "description": "Login credentials (email \u0026 password)",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/Core_authDto.LoginRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Returns the authenticated user object",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "Invalid input",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized – wrong credentials",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/logs": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "ดึงรายการ System Logs พร้อม pagination และ filter ตาม action, endpoint, status, ช่วงเวลา `from`–`to` (RFC3339)",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Log"
                ],
                "summary": "ดึงประวัติระบบ (System Logs)",
                "parameters": [
                    {
                        "type": "integer",
                        "default": 1,
                        "description": "หน้า (default = 1)",
                        "name": "page",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "default": 20,
                        "description": "จำนวนต่อหน้า (default = 20)",
                        "name": "limit",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "กรองตาม action",
                        "name": "action",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "กรองตาม endpoint",
                        "name": "endpoint",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "กรองตาม status",
                        "name": "status",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "วันที่เริ่มต้น (RFC3339)",
                        "name": "from",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "วันที่สิ้นสุด (RFC3339)",
                        "name": "to",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "คืนค่า total และ logs[]",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "500": {
                        "description": "เกิดข้อผิดพลาดระหว่างดึง System Logs",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/none": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "ดึงข้อมูล System Log รายการเดียวตามรหัส `log_id`",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Log"
                ],
                "summary": "ดึง System Log ตาม ID",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "รหัส Log",
                        "name": "log_id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "คืนค่า SystemLog object",
                        "schema": {
                            "$ref": "#/definitions/coreModels.SystemLog"
                        }
                    },
                    "400": {
                        "description": "invalid log_id",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "404": {
                        "description": "log not found",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "เกิดข้อผิดพลาดระหว่างดึง Log",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            },
            "post": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "รับข้อมูล Log (action, resource, status, HTTPMethod, endpoint, optional user_id, branch_id, details) แล้วบันทึกลงระบบ",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Log"
                ],
                "summary": "สร้าง Log Entry",
                "parameters": [
                    {
                        "description": "ข้อมูลสำหรับสร้าง Log Entry",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/Core_authDto.CreateLogRequest"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "คืนค่า LogID และ CreatedAt ของ Log ที่สร้าง",
                        "schema": {
                            "$ref": "#/definitions/Core_authDto.CreateLogResponse"
                        }
                    },
                    "400": {
                        "description": "Invalid input หรือ invalid details format",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "เกิดข้อผิดพลาดระหว่างการสร้าง Log",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "Core_authDto.CreateLogRequest": {
            "type": "object",
            "required": [
                "action",
                "endpoint",
                "http_method",
                "status"
            ],
            "properties": {
                "action": {
                    "type": "string"
                },
                "branch_id": {
                    "type": "string"
                },
                "details": {
                    "description": "auto-marshaled to JSONB"
                },
                "endpoint": {
                    "type": "string"
                },
                "http_method": {
                    "type": "string"
                },
                "resource": {
                    "type": "string"
                },
                "status": {
                    "type": "string"
                },
                "user_id": {
                    "type": "string"
                }
            }
        },
        "Core_authDto.CreateLogResponse": {
            "type": "object",
            "properties": {
                "created_at": {
                    "type": "string"
                },
                "log_id": {
                    "type": "integer"
                }
            }
        },
        "Core_authDto.LoginRequest": {
            "type": "object",
            "required": [
                "email",
                "password"
            ],
            "properties": {
                "email": {
                    "type": "string"
                },
                "password": {
                    "type": "string"
                }
            }
        },
        "coreModels.Branch": {
            "type": "object",
            "properties": {
                "address": {
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                },
                "deleted_at": {
                    "$ref": "#/definitions/gorm.DeletedAt"
                },
                "id": {
                    "type": "integer"
                },
                "name": {
                    "description": "composite unique with TenantID",
                    "type": "string"
                },
                "tenant": {
                    "$ref": "#/definitions/coreModels.Tenant"
                },
                "tenant_id": {
                    "type": "integer"
                },
                "updated_at": {
                    "type": "string"
                },
                "users": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/coreModels.User"
                    }
                }
            }
        },
        "coreModels.Module": {
            "type": "object",
            "properties": {
                "created_at": {
                    "type": "string"
                },
                "description": {
                    "type": "string"
                },
                "id": {
                    "type": "integer"
                },
                "name": {
                    "description": "เช่น barber_booking",
                    "type": "string"
                }
            }
        },
        "coreModels.Role": {
            "type": "object",
            "properties": {
                "created_at": {
                    "type": "string"
                },
                "deleted_at": {
                    "$ref": "#/definitions/gorm.DeletedAt"
                },
                "description": {
                    "type": "string"
                },
                "id": {
                    "type": "integer"
                },
                "module": {
                    "$ref": "#/definitions/coreModels.Module"
                },
                "module_id": {
                    "type": "integer"
                },
                "name": {
                    "type": "string"
                },
                "tenant": {
                    "$ref": "#/definitions/coreModels.Tenant"
                },
                "tenant_id": {
                    "type": "integer"
                },
                "updated_at": {
                    "type": "string"
                }
            }
        },
        "coreModels.SystemLog": {
            "type": "object",
            "properties": {
                "action": {
                    "type": "string"
                },
                "branchID": {
                    "description": "FK to branches.id",
                    "type": "integer"
                },
                "clientApp": {
                    "type": "string"
                },
                "createdAt": {
                    "type": "string"
                },
                "details": {
                    "type": "array",
                    "items": {
                        "type": "integer"
                    }
                },
                "endpoint": {
                    "type": "string"
                },
                "httpmethod": {
                    "type": "string"
                },
                "ipaddress": {
                    "type": "string"
                },
                "logID": {
                    "type": "integer"
                },
                "metadata": {
                    "type": "array",
                    "items": {
                        "type": "integer"
                    }
                },
                "origin": {
                    "type": "string"
                },
                "referer": {
                    "type": "string"
                },
                "resource": {
                    "type": "string"
                },
                "status": {
                    "type": "string"
                },
                "statusCode": {
                    "type": "integer"
                },
                "userAgent": {
                    "type": "string"
                },
                "userID": {
                    "description": "FK to users.id",
                    "type": "integer"
                },
                "userRole": {
                    "type": "string"
                },
                "xforwardedFor": {
                    "description": "ข้อมูล HTTP headers ที่เกี่ยวข้อง",
                    "type": "string"
                }
            }
        },
        "coreModels.Tenant": {
            "type": "object",
            "properties": {
                "created_at": {
                    "type": "string"
                },
                "deleted_at": {
                    "type": "string"
                },
                "domain": {
                    "type": "string"
                },
                "id": {
                    "type": "integer"
                },
                "is_active": {
                    "type": "boolean"
                },
                "name": {
                    "type": "string"
                },
                "updated_at": {
                    "type": "string"
                }
            }
        },
        "coreModels.TenantUser": {
            "type": "object",
            "properties": {
                "tenant": {
                    "$ref": "#/definitions/coreModels.Tenant"
                },
                "tenant_id": {
                    "type": "integer"
                },
                "user": {
                    "$ref": "#/definitions/coreModels.User"
                },
                "user_id": {
                    "type": "integer"
                }
            }
        },
        "coreModels.User": {
            "type": "object",
            "properties": {
                "avatar_name": {
                    "type": "string"
                },
                "avatar_url": {
                    "type": "string"
                },
                "branch": {
                    "$ref": "#/definitions/coreModels.Branch"
                },
                "branch_id": {
                    "type": "integer"
                },
                "created_at": {
                    "type": "string"
                },
                "deleted_at": {
                    "$ref": "#/definitions/gorm.DeletedAt"
                },
                "email": {
                    "type": "string"
                },
                "id": {
                    "type": "integer"
                },
                "role": {
                    "$ref": "#/definitions/coreModels.Role"
                },
                "role_id": {
                    "type": "integer"
                },
                "tenant_users": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/coreModels.TenantUser"
                    }
                },
                "updated_at": {
                    "type": "string"
                },
                "username": {
                    "type": "string"
                }
            }
        },
        "corePort.ChangeRoleInput": {
            "type": "object",
            "required": [
                "id",
                "role"
            ],
            "properties": {
                "id": {
                    "type": "integer"
                },
                "role": {
                    "type": "string"
                }
            }
        },
        "corePort.CreateBranchInput": {
            "type": "object",
            "properties": {
                "address": {
                    "type": "string",
                    "example": "123 Main St."
                },
                "name": {
                    "type": "string",
                    "example": "My New Store"
                }
            }
        },
        "corePort.CreateTenantInput": {
            "type": "object",
            "properties": {
                "domain": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                }
            }
        },
        "corePort.CreateUserInput": {
            "type": "object",
            "required": [
                "email",
                "password",
                "role",
                "username"
            ],
            "properties": {
                "avatarName": {
                    "type": "string"
                },
                "avatarURL": {
                    "type": "string"
                },
                "branchID": {
                    "type": "integer"
                },
                "email": {
                    "type": "string"
                },
                "password": {
                    "type": "string",
                    "minLength": 6
                },
                "role": {
                    "type": "string"
                },
                "username": {
                    "type": "string"
                }
            }
        },
        "corePort.RegisterInput": {
            "type": "object",
            "required": [
                "email",
                "password",
                "username"
            ],
            "properties": {
                "email": {
                    "type": "string"
                },
                "password": {
                    "type": "string",
                    "minLength": 6
                },
                "username": {
                    "type": "string"
                }
            }
        },
        "corePort.UpdateBranchInput": {
            "type": "object",
            "properties": {
                "name": {
                    "type": "string",
                    "example": "สำนักงานใหญ่ใหม่"
                }
            }
        },
        "corePort.UpdateTenantInput": {
            "type": "object",
            "properties": {
                "domain": {
                    "type": "string"
                },
                "id": {
                    "type": "integer"
                },
                "isActive": {
                    "type": "boolean"
                },
                "name": {
                    "type": "string"
                }
            }
        },
        "corePort.UserInfoResponse": {
            "type": "object",
            "properties": {
                "avatar_name": {
                    "type": "string"
                },
                "avatar_url": {
                    "type": "string"
                },
                "email": {
                    "type": "string"
                },
                "id": {
                    "type": "integer"
                },
                "role": {
                    "type": "string"
                },
                "role_id": {
                    "type": "integer"
                },
                "username": {
                    "type": "string"
                }
            }
        },
        "gorm.DeletedAt": {
            "type": "object",
            "properties": {
                "time": {
                    "type": "string"
                },
                "valid": {
                    "description": "Valid is true if Time is not NULL",
                    "type": "boolean"
                }
            }
        }
    }
}